<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Faculties</title>
    <link rel="stylesheet" href="style.css">
    <style>
        html,body{height:100%;margin:0;font-family:Arial,Helvetica,sans-serif}
        body{background:url("images/DOrSUMaincampus.jpg") center/cover no-repeat fixed;display:flex;align-items:center;justify-content:center}
        body::before{content:"";position:fixed;inset:0;background:rgba(0,0,0,0.35);pointer-events:none;z-index:0}
        .page { position: relative; z-index:1; width:95%; max-width:1100px; margin:40px auto; }
        .header { display:flex;align-items:center;justify-content:space-between; gap:12px; color:#fff; margin-bottom:18px }
        .header h1{margin:0;font-size:28px;color:#ffcc00;text-shadow:0 3px 12px rgba(0,0,0,0.8);padding:6px 10px;border-radius:8px;background:linear-gradient(90deg, rgba(0,0,0,0.25), rgba(0,0,0,0.15));}
        .role-badge{background:linear-gradient(90deg,#003366,#ffcc00);padding:8px 12px;border-radius:999px;color:#04263f;font-weight:700}
        .grid { display:grid; grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); gap:18px; }
        .card { position:relative; background:rgba(255,255,255,0.92); border-radius:12px; padding:0; box-shadow:0 6px 18px rgba(0,0,0,0.18); overflow:hidden; transition:transform .2s; border-left:6px solid #003366 }
        .card:hover{transform:translateY(-6px)}
        .card .imgwrap{position:relative;border-radius:10px;overflow:hidden;border:6px solid #ffcc00}
        .card img{display:block;width:100%;height:260px;object-fit:cover}
        
        .card .caption{position:absolute;left:0;right:0;bottom:0;padding:10px 12px;background:linear-gradient(180deg, rgba(0,0,0,0.0), rgba(0,0,0,0.5));color:#ffcc00;font-weight:700;font-size:15px;text-shadow:0 2px 6px rgba(0,0,0,0.6)}
        .card .meta{padding:12px 14px 16px;color:#27547a;font-size:14px}
        .controls{display:flex;gap:10px;align-items:center}
        .back{background:#ffcc00;color:#003366;padding:8px 12px;border-radius:8px;text-decoration:none;font-weight:700}
        
        .scroll-area{max-height:72vh;overflow:auto;padding-right:8px;scroll-behavior:smooth}
        
        .card::before{content:"";position:absolute;left:0;top:0;bottom:0;width:8px;background:linear-gradient(180deg,#003366,#ffcc00);border-top-left-radius:12px;border-bottom-left-radius:12px}
        @media (max-width:600px){ .card img{height:160px} }
        .section-label{grid-column:1/-1;color:#ffcc00;font-weight:800;padding:10px 12px;font-size:18px}
    </style>
</head>
<body>
    <div class="page">
        <div class="header">
            <h1>Faculties</h1>
            <div class="controls">
                <div id="roleBadge" class="role-badge">ROLE</div>
                <a class="back" href="dashboard.html">Back</a>
            </div>
        </div>

        <div class="scroll-area">
            <div id="grid" class="grid"></div>
        </div>
    </div>

    <script>
        
        const faculties = [
            { code:'CRIM', name:'Faculty of Criminal Justice Education', files:['images/CRIM.jpg','images/fcje_logo.jpg'] },
            { code:'FALS', name:'Faculty of Agriculture & Life Sciences', files:['images/FALS.jpg','images/fals_logo.jpg'] },
            { code:'FCET', name:'Faculty of Computing Engineering and Technology', files:['images/FCET.jpg','images/facet_logo.jpg'] },
            { code:'FGBM', name:'Faculty of Business & Management', files:['images/FGBM.jpg','images/fbm_logo.jpg'] },
            { code:'FHSSC',name:'Faculty of Humanities, Social Sciences and Communication', files:['images/FHSSC.jpg','images/FHuSoCom_logo.jpg'] },
            { code:'NURSING',name:'Faculty of Nursing & Allied Health Sciences', files:['images/NURSING.jpg','images/fnahs_logo.jpg'] },
            { code:'FTED', name:'Faculty of Teacher Education (FTED)', files:['images/educ.jpg','images/DOrSUMaincampus.jpg'] }
        ];

        function getParam(k){return new URLSearchParams(window.location.search).get(k)}
        const role = (getParam('role')||localStorage.getItem('selectedRole')||'guest').toUpperCase();
        document.getElementById('roleBadge').textContent = role;

        const grid = document.getElementById('grid');

        function makeCard(f){
            const div = document.createElement('div'); div.className='card';
            const wrap = document.createElement('div'); wrap.className='imgwrap';
            const img = document.createElement('img'); img.alt = f.name; img.src = f.files[0];

            
            const caption = document.createElement('div'); caption.className = 'caption'; caption.textContent = f.name;

            
            img.onerror = function(){
                for(let i=0;i<f.files.length;i++){
                    if(img.src.endsWith(f.files[i])) continue; 
                    img.src = f.files[i];
                    return;
                }
                
                img.onerror = null; img.src='images/DOrSUMaincampus.jpg';
            };

            wrap.appendChild(img);
            wrap.appendChild(caption);

            const meta = document.createElement('div'); meta.className = 'meta'; meta.textContent = 'Click the card to open the full image.';

            div.appendChild(wrap);
            div.appendChild(meta);

            
            div.addEventListener('click', ()=>{
                const full = f.files.find(x=>x && x.includes('.')) || f.files[0];
                window.open(full,'_blank');
            });
            return div;
        }

        
        faculties.forEach(f=> grid.appendChild(makeCard(f)));

        if(role === 'GUEST'){
            const label = document.createElement('div');
            label.className = 'section-label';
            label.textContent = 'University facilities';
            grid.appendChild(label);

            const uniFiles = [
                'images/University 1st gate.jpg',
                'images/University 2nd gate.jpg',
                'images/University Admin.jpg',
                'images/University Conference room.jpg',
                'images/University Dormitory.jpg',
                'images/University Gymnasium.jpg',
                'images/University Gym.jpg',
                'images/University Library.jpg',
                'images/University Mini Forest.jpg'
            ];

            uniFiles.forEach(p => {
                const name = p.split('/').pop().replace('.jpg','');
                const f = { name: name, files: [p] };
                grid.appendChild(makeCard(f));
            });
        }

        
        setTimeout(()=>{
            const first = grid.querySelector('.card');
            if(first) first.scrollIntoView({behavior:'smooth', block:'start'});
        },150);
    </script>
</body>
</html>
